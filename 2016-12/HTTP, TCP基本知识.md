
### 为什么说`TCP`是可靠连接而`UDP`是不可靠连接？

- `TCP`是面向连接的协议，通过三次握手建立连接，它还提供超时重发，丢弃重复数据，检验数据，流量控制等功能，保证数据能从一端传到另一端。
- `UDP`只是把应用程序传给IP层的数据报发送出去，但是并不能保证它们能到达目的地。由于UDP在传输数据报前不用在客户端和服务器之间建立一个连接，且没有超时重发等机制，固而传输速度很快。

### `Cache-Control` 的值 `no-cache` 和 `no-store`有什么区别？

- `no-cache`表示必须先与服务器确认返回的响应是否被更改，然后才能使用该响应来满足后续对同一个网址的请求。因此，如果存在合适的验证令牌 (ETag)，`no-cache`会发起往返通信来验证缓存的响应，如果资源未被更改，可以避免下载。
- 相比之下，`no-store`更加简单，直接禁止浏览器和所有中继缓存存储返回的任何版本的响应。例如：一个包含个人隐私数据或银行数据的响应。每次用户请求该资源时，都会向服务器发送一个请求，每次都会下载完整的响应。

### HTTP有什么缺点？

- 通信使用明文传输，内容可能会被窃听（未加密）。
- 不验证通信方的身份，因此可能遭遇伪装（不认证）。
- 无法验证报文的完整性，所以有可能被篡改（无完整性保护）。
- 请求只能从客户端发起。
- 每次通信都会发送冗长的首部信息。

### 对称加密和非对称加密的区别？HTTPS使用哪种加密方式？

- 对称加密是最快速、最简单的一种加密方式，加密（encryption）与解密（decryption）用的是同样的密钥（secret key）。
- 非对称加密为数据的加密与解密提供了一个非常安全的方法，它使用了一对密钥，公钥（public key）和私钥（private key）。私钥只能由一方安全保管，不能外泄，而公钥则可以发给任何请求它的人。非对称加密使用这对密钥中的一个进行加密，而解密则需要另一个密钥。其加密与解密速度慢。
- HTTPS使用两者混合的加密方式，先是将对称加密的密钥使用非对称加密的公钥进行加密，然后发送出去，接收方使用私钥进行解密得到对称加密的密钥，然后双方可以使用对称加密来进行以后的通信。


### HTTPS会带来哪些性能损耗？

- 增加延时： 一次完整的握手至少需要两端依次来回两次通信，至少增加延时2 RTT，利用会话缓存从而复用连接，延时也至少1 RTT。
- 消耗CPU 资源： HTTPS 通信主要包括对对称加解密、非对称加解密，消耗CPU资源。


### 有哪些方式来优化HTTPS带来的性能损耗？

- CDN 接入：  
HTTPS 增加的延时主要是传输延时 RTT，RTT 的特点是节点越近延时越小，CDN 天然离用户最近，因此选择使用 CDN 作为 HTTPS 接入的入口，将能够极大减少接入延时。CDN 节点通过和业务服务器维持长连接、会话复用和链路质量优化等可控方法，极大减少 HTTPS 带来的延时。

- 会话缓存：  
虽然前文提到 HTTPS 即使采用会话缓存也要至少1*RTT的延时，但是至少延时已经减少为原来的一半，明显的延时优化;同时，基于会话缓存建立的 HTTPS 连接不需要服务器使用RSA私钥解密获取 Pre-master 信息，可以省去CPU的消耗。如果业务访问连接集中，缓存命中率高，则HTTPS的接入能力讲明显提升。当前 TRP 平台的缓存命中率高峰时期大于30%，10k/s的接入资源实际可以承载13k/的接入，收效非常可观。

- 硬件加速： 
为接入服务器安装专用的 SSL 硬件加速卡，作用类似 GPU，释放 CPU，能够具有更高的 HTTPS 接入能力且不影响业务程序的。测试某硬件加速卡单卡可以提供 35k 的解密能力，相当于175核 CPU，至少相当于7台24核的服务器，考虑到接入服务器其它程序的开销，一张硬件卡可以实现接近10台服务器的接入能力。

- 远程解密:  
本地接入消耗过多的 CPU 资源，浪费了网卡和硬盘等资源，考虑将最消耗 CPU 资源的RSA解密计算任务转移到其它服务器，如此则可以充分发挥服务器的接入能力，充分利用带宽与网卡资源。远程解密服务器可以选择 CPU 负载较低的机器充当，实现机器资源复用，也可以是专门优化的高计算性能的服务器。当前也是 CDN 用于大规模HTTPS接入的解决方案之一。

- SPDY/HTTP2：  
前面的方法分别从减少传输延时和单机负载的方法提高 HTTPS 接入性能，但是方法都基于不改变 HTTP 协议的基础上提出的优化方法，SPDY/HTTP2 利用 TLS/SSL 带来的优势，通过修改协议的方法来提升 HTTPS 的性能，提高下载速度等。

### HSTS是什么？解决了什么问题？
在进行HTTP向HTTPS跳转的过程中，会进行302的跳转，浪费请求连接。  
`HSTS`是`HTTP Strict Transport Security`的缩写，即：“HTTP严格传输安全”。服务器端配置支持HSTS后，会在给浏览器返回的HTTP首部中携带HSTS字段。浏览器获取到该信息后，会将所有HTTP访问请求在内部做307跳转到HTTPS。而无需任何网络过程。但是HSTS是有缺陷的，第一次访问网站的客户端，HSTS并不工作。 要解决这个问题，可以将我们的域名添加到[HSTS preload list](https://hstspreload.appspot.com/)中。

### x-frame-options 请求头有什么作用？

`X-Frame-Options HTTP` 响应头是用来给浏览器指示允许一个页面可否在 `<frame>`, `<iframe>`` 或者 `<object>` 中展现的标记。网站可以使用此功能，来确保自己网站的内容没有被嵌到别人的网站中去，也从而避免了点击劫持 (clickjacking) 的攻击。

### TCP的快速重传机制？

- `TCP`引入了一种叫`Fast Retransmit` 的算法，不以时间驱动，而以数据驱动重传。也就是说，如果，包没有连续到达，就ack最后那个可能被丢了的包，如果发送方连续收到3次相同的ack，就重传。`Fast Retransmit`的好处是不用等`timeout`了再重传。
- 比如：如果发送方发出了`1，2，3，4，5`份数据，第一份先到送了，于是就`ack`回`2`，结果`2`因为某些原因没收到，`3`到达了，于是还是`ack`回`2`，后面的`4`和`5`都到了，但是还是`ack`回`2`，因为`2`还是没有收到，于是发送端收到了三个`ack=2`的确认，知道了`2`还没有到，于是就马上重转`2`。然后，接收端收到了`2`，此时因为`3，4，5`都收到了，于是`ack`回`6`。


### 拥塞控制主要的四个算法?

- 慢启动
- 拥塞避免
- 拥塞发生
- 快速恢复

